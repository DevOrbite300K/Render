{% extends "admin_base2.html" %}

{% block content %}
<div class="container mt-4">
    <div class="card border-0 shadow-lg" style="background-color: #ffffff;">
        <div class="card-header border-bottom" style="background: linear-gradient(to right, #28a745, #007bff);">
            <div class="d-flex justify-content-between align-items-center">
                <h2 class="mb-0 text-white">
                    <i class="fas fa-calendar-check mr-2 text-warning"></i>Détails du Rendez-Vous
                </h2>
                <span class="badge {% if rendezvous.statut_rdv == 'confirme' %}bg-success{% elif rendezvous.statut_rdv == 'annule' %}bg-danger{% else %}bg-warning{% endif %}">
                    {{ rendezvous.get_statut_rdv_display }}
                </span>
            </div>
        </div>
        
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <!-- Informations principales -->
                    <div class="detail-section mb-4 p-3 border rounded">
                        <h5 class="text-primary mb-3"><i class="fas fa-info-circle mr-2"></i>Informations Principales</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between border-light">
                                <span class="font-weight-bold text-muted">Objet :</span>
                                <span class="text-dark">{{ rendezvous.objet }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between border-light">
                                <span class="font-weight-bold text-muted">Date/Heure :</span>
                                <span class="text-dark">
                                    {{ rendezvous.date_rdv|date:"d/m/Y" }} à {{ rendezvous.heure_rdv|time:"H:i" }}
                                </span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between border-light">
                                <span class="font-weight-bold text-muted">Lieu :</span>
                                <span class="text-dark">{{ rendezvous.lieu }}</span>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Informations du dossier -->
                    <div class="detail-section p-3 border rounded">
                        <h5 class="text-primary mb-3"><i class="fas fa-folder-open mr-2"></i>Dossier Associé</h5>
                        {% if rendezvous.dossier %}
                        <div class="card border-light" style="background-color: #f8f9fa;">
                            <div class="card-body">
                                <h6 class="card-title">
                                    <a href="{% url 'dossierdetail' rendezvous.dossier.pk %}" class="text-decoration-none text-dark">
                                        <i class="fas fa-folder mr-2 text-warning"></i>
                                        {{ rendezvous.dossier.titre }}
                                    </a>
                                </h6>
                                <p class="card-text text-muted mb-1">
                                    <small>Type: {{ rendezvous.dossier.type_affaire }}</small>
                                </p>
                                <p class="card-text text-muted mb-0">
                                    <small>Statut: 
                                        {% if rendezvous.dossier.date_cloture %}
                                        <span class="text-danger">Clôturé</span>
                                        {% else %}
                                        <span class="text-success">Actif</span>
                                        {% endif %}
                                    </small>
                                </p>
                            </div>
                        </div>
                        {% else %}
                        <p class="text-muted">Aucun dossier associé</p>
                        {% endif %}
                    </div>
                </div>
                
                <div class="col-md-6">
                    <!-- Participants -->
                    <div class="detail-section mb-4 p-3 border rounded">
                        <h5 class="text-primary mb-3"><i class="fas fa-users mr-2"></i>Participants</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item border-light">
                                <div class="font-weight-bold text-muted mb-2">Client :</div>
                                {% if rendezvous.client %}
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-user mr-3 text-info"></i>
                                    <div>
                                        <a href="{% url 'clientdetail' rendezvous.client.pk %}" class="text-dark">
                                            {{ rendezvous.client.nom_complet }}
                                        </a>
                                        <div class="text-muted small">
                                            {{ rendezvous.client.telephone|default:"Téléphone non renseigné" }}
                                        </div>
                                    </div>
                                </div>
                                {% else %}
                                <p class="text-muted">Aucun client associé</p>
                                {% endif %}
                            </li>
                            <li class="list-group-item border-light mt-2">
                                <div class="font-weight-bold text-muted mb-2">Avocat :</div>
                                {% if rendezvous.avocat %}
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-user-tie mr-3 text-primary"></i>
                                    <div>
                                        <a href="{% url 'avocatdetail' rendezvous.avocat.pk %}" class="text-dark">
                                            {{ rendezvous.avocat.nom_complet }}
                                        </a>
                                        <div class="text-muted small">
                                            Spécialité: {{ rendezvous.avocat.specialite|default:"Non spécifiée" }}
                                        </div>
                                    </div>
                                </div>
                                {% else %}
                                <p class="text-muted">Aucun avocat assigné</p>
                                {% endif %}
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Notes -->
                    {% if rendezvous.notes %}
                    <div class="detail-section p-3 border rounded">
                        <h5 class="text-primary mb-3"><i class="fas fa-sticky-note mr-2"></i>Notes</h5>
                        <div class="card border-light" style="background-color: #f8f9fa;">
                            <div class="card-body text-dark">
                                {{ rendezvous.notes|linebreaks }}
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="card-footer border-top" style="background-color: #f8f9fa;">
            <div class="d-flex justify-content-between">
                <a href="{% url 'rendezvousliste' %}" class="btn btn-outline-secondary btn-rounded">
                    <i class="fas fa-arrow-left mr-2"></i>Retour à la liste
                </a>
                <div>
                    <a href="{% url 'modifierendezvous' rendezvous.pk %}" class="btn btn-warning btn-rounded mr-2">
                        <i class="fas fa-edit mr-2"></i>Modifier
                    </a>
                    <a href="{% url 'supprimerrendezvous' rendezvous.pk %}" class="btn btn-danger btn-rounded">
                        <i class="fas fa-trash-alt mr-2"></i>Supprimer
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    :root {
        --primary-blue: #007bff;
        --primary-green: #28a745;
        --primary-red: #dc3545;
        --primary-yellow: #ffc107;
        --primary-orange: #fd7e14;
        --primary-black: #343a40;
    }
    
    body {
        background-color: #f8f9fa;
    }
    
    .card {
        border-radius: 12px;
        overflow: hidden;
        border: 1px solid #dee2e6;
    }
    
    .detail-section {
        background-color: white;
        border-radius: 8px;
        border: 1px solid #e9ecef;
    }
    
    .text-warning {
        color: var(--primary-yellow) !important;
    }
    
    .btn-rounded {
        border-radius: 50px;
        padding: 8px 20px;
        transition: all 0.3s ease;
    }
    
    .btn-warning {
        background-color: var(--primary-yellow);
        color: var(--primary-black);
        border: none;
    }
    
    .btn-warning:hover {
        background-color: #e0a800;
        box-shadow: 0 4px 8px rgba(255, 193, 7, 0.3);
    }
    
    .btn-danger {
        background-color: var(--primary-red);
        color: white;
        border: none;
    }
    
    .btn-danger:hover {
        background-color: #c82333;
    }
    
    .btn-outline-secondary {
        border-color: #6c757d;
        color: #6c757d;
    }
    
    .btn-outline-secondary:hover {
        background-color: #6c757d;
        color: white;
    }
    
    .badge.bg-success {
        background-color: rgba(40, 167, 69, 0.1) !important;
        color: var(--primary-green) !important;
        border: 1px solid var(--primary-green);
    }
    
    .badge.bg-warning {
        background-color: rgba(255, 193, 7, 0.1) !important;
        color: var(--primary-yellow) !important;
        border: 1px solid var(--primary-yellow);
    }
    
    .badge.bg-danger {
        background-color: rgba(220, 53, 69, 0.1) !important;
        color: var(--primary-red) !important;
        border: 1px solid var(--primary-red);
    }
    
    /* Effet spécial pour le header */
    .card-header {
        position: relative;
        overflow: hidden;
    }
    
    .card-header::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: linear-gradient(45deg, 
            rgba(255, 193, 7, 0.1) 0%, 
            rgba(220, 53, 69, 0.1) 50%, 
            rgba(253, 126, 20, 0.1) 100%);
        pointer-events: none;
    }
</style>
{% endblock %}