{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    {% block title %}
       <title>
        Cabinet/MIP/Tableau/de/bord
      </title>
    {% endblock %}
    <meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
    <link rel="icon" href="{% static 'assets/img/icon.ico' %}" type="image/x-icon"/>
    <!-- Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />


    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Font Awesome 6 (icônes) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- (Optionnel) Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- endinject -->

    <!-- Fonts and icons -->
    <script src="{% static 'assets/js/plugin/webfont/webfont.min.js' %}"></script>
    <script>
        WebFont.load({
            google: {"families":["Lato:300,400,700,900"]},
            custom: {"families":["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"], urls: ['../assets/css/fonts.min.css']},
            active: function() {
                sessionStorage.fonts = true;
            }
        });
    </script>

    <!-- CSS Files -->
    <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/atlantis.min.css' %}">

    <!-- Custom CSS for company colors -->
    <style>
        :root {
            --primary-blue: #2c5fdc;
            --primary-green: #3abf94;
            --accent-red: #e74c3c;
            --accent-yellow: #f39c12;
            --dark: #2a3547;
            --light: #f8f9fa;
        }

        /* Logo Header */
        .logo-header[data-background-color="blue"] {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-green)) !important;
        }

        /* Navbar Header */
        .navbar-header[data-background-color="blue2"] {
            background: linear-gradient(135deg, var(--dark), var(--primary-blue)) !important;
        }

        /* Sidebar */
        .sidebar .nav-primary > li.nav-section > h4 {
            color: var(--accent-red);
            border-left: 4px solid var(--accent-red);
        }

        .sidebar .nav-primary > li.active > a,
        .sidebar .nav-primary > li > a:hover {
            color: var(--primary-blue);
            background-color: rgba(44, 95, 220, 0.1);
        }

        .sidebar .nav-primary > li.active > a:before {
            background-color: var(--primary-blue);
        }

        /* Buttons */
        .btn-primary {
            background-color: var(--primary-blue);
            border-color: var(--primary-blue);
        }

        .btn-primary:hover {
            background-color: #1a4fc4;
            border-color: #1a4fc4;
        }

        .btn-success {
            background-color: var(--primary-green);
            border-color: var(--primary-green);
        }

        .btn-warning {
            background-color: var(--accent-yellow);
            border-color: var(--accent-yellow);
        }

        .btn-danger {
            background-color: var(--accent-red);
            border-color: var(--accent-red);
        }

        /* Notifications */
        .notification {
            background-color: var(--accent-yellow);
        }

        /* Quick actions */
        .quick-actions-info {
            border-top: 3px solid var(--primary-green);
        }

        /* User dropdown */
        .dropdown-user {
            border-top: 3px solid var(--primary-blue);
        }

        /* Footer */
        .footer .copyright {
            color: var(--dark);
        }

        /* Custom badges */
        .badge-blue {
            background-color: var(--primary-blue);
            color: white;
        }

        .badge-green {
            background-color: var(--primary-green);
            color: white;
        }

        .badge-red {
            background-color: var(--accent-red);
            color: white;
        }

        .badge-yellow {
            background-color: var(--accent-yellow);
            color: var(--dark);
        }
    </style>

    {% block style %}

    {% endblock %}


    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link rel="stylesheet" href="{% static 'assets/css/demo.css' %}">
</head>
<body>
    <div class="wrapper">
        <div class="main-header">
            <!-- Logo Header -->
            <div class="logo-header" data-background-color="blue">

                <a href="#" class="logo">
                    <img src="{% static 'assets/logo/mipp.png' %}" alt="navbar brand" class="navbar-brand" style="width: 165px; height: 60px; margin-left: 10px;">
                </a>
                <button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon">
                        <i class="icon-menu"></i>
                    </span>
                </button>
                <button class="topbar-toggler more"><i class="icon-options-vertical"></i></button>
                <div class="nav-toggle">
                    <button class="btn btn-toggle toggle-sidebar">
                        <i class="icon-menu"></i>
                    </button>
                </div>
            </div>
            <!-- End Logo Header -->

            <!-- Navbar Header -->
            <nav class="navbar navbar-header navbar-expand-lg" data-background-color="blue2">

                <div class="container-fluid">
                    <div class="collapse" id="search-nav">
                        <form class="navbar-left navbar-form nav-search mr-md-3">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <button type="submit" class="btn btn-search pr-1">
                                        <i class="fa fa-search search-icon"></i>
                                    </button>
                                </div>
                                <input type="text" placeholder="Search ..." class="form-control">
                            </div>
                        </form>
                    </div>
                    <ul class="navbar-nav topbar-nav ml-md-auto align-items-center">
                        <li class="nav-item toggle-nav-search hidden-caret">
                            <a class="nav-link" data-toggle="collapse" href="#search-nav" role="button" aria-expanded="false" aria-controls="search-nav">
                                <i class="fa fa-search"></i>
                            </a>
                        </li>

                        <li class="nav-item dropdown hidden-caret">
                            <a class="nav-link dropdown-toggle" href="#" id="notifDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fa fa-bell" style="color: var(--accent-yellow);"></i>
                                <span class="notification" style="background: var(--accent-red);"></span>
                            </a>
                            <ul class="dropdown-menu notif-box animated fadeIn" aria-labelledby="notifDropdown">
                                <li>
                                    <div class="dropdown-title" style="color: var(--primary-blue);">Notifications</div>
                                </li>

                                <li>
                                    <a class="see-all" href="javascript:void(0);">Voir tout les notifications<i class="fa fa-angle-right"></i> </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown hidden-caret">
                            <a class="nav-link" data-toggle="dropdown" href="#" aria-expanded="false">
                                <i class="fas fa-layer-group" style="color: var(--primary-green);"></i>
                            </a>
                            <div class="dropdown-menu quick-actions quick-actions-info animated fadeIn">
                                <div class="quick-actions-header">
                                    <span class="title mb-1" style="color: var(--primary-blue);">Action rapide</span>
                                    <span class="subtitle op-8">Shortcuts</span>
                                </div>
                                <div class="quick-actions-scroll scrollbar-outer">
                                    <div class="quick-actions-items">
                                        <div class="row m-0">
                                            <a class="col-6 col-md-4 p-0" href="#">
                                                <div class="quick-actions-item">
                                                    <i class="flaticon-file-1" style="color: var(--primary-blue);"></i>
                                                    <span class="text">Liste des messages</span>
                                                </div>
                                            </a>
                                            <a class="col-6 col-md-4 p-0" href="#">
                                                <div class="quick-actions-item">
                                                    <i class="flaticon-database" style="color: var(--primary-green);"></i>
                                                    <span class="text">Ajouter un nouveau client</span>
                                                </div>
                                            </a>
                                            <a class="col-6 col-md-4 p-0" href="#">
                                                <div class="quick-actions-item">
                                                    <i class="flaticon-pen" style="color: var(--accent-red);"></i>
                                                    <span class="text">Ajouter un nouveau document</span>
                                                </div>
                                            </a>
                                            <a class="col-6 col-md-4 p-0" href="#">
                                                <div class="quick-actions-item">
                                                    <i class="flaticon-interface-1" style="color: var(--accent-yellow);"></i>
                                                    <span class="text">Liste des experts</span>
                                                </div>
                                            </a>
                                            <a class="col-6 col-md-4 p-0" href="#">
                                                <div class="quick-actions-item">
                                                    <i class="flaticon-list" style="color: var(--primary-blue);"></i>
                                                    <span class="text">Liste des Personnelles administratif</span>
                                                </div>
                                            </a>
                                            <a class="col-6 col-md-4 p-0" href="#">
                                                <div class="quick-actions-item">
                                                    <i class="flaticon-file" style="color: var(--primary-green);"></i>
                                                    <span class="text">Planifier un rendezvous</span>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item dropdown hidden-caret">
                            <a class="dropdown-toggle profile-pic" data-toggle="dropdown" href="#" aria-expanded="false">
                                <div class="avatar-sm">
                                    {% if request.user.profile.profile %}
                                        <img src="{{ request.user.profile.profile.url }}" alt="..." class="avatar-img rounded-circle">
                                    {% else %}
                                        <img src="{% static 'assets/img/profile2.jpg' %}" alt="profil" class="avatar-img rounded-circle">
                                    {% endif %}


                                </div>
                            </a>
                            <ul class="dropdown-menu dropdown-user animated fadeIn">
                                <div class="dropdown-user-scroll scrollbar-outer">
                                    <li>
                                        <div class="user-box">
                                            {% if request.user.profile.profile %}
                                                <img src="{{ request.user.profile.profile.url }}" alt="..." class="avatar-img rounded-circle">
                                            {% else %}
                                                <img src="{% static 'assets/img/profile2.jpg' %}" alt="profil" class="avatar-img rounded-circle">
                                            {% endif %}


                                            <div class="u-text">
                                                <h4 style="color: var(--primary-blue);"> {{request.user.username}} </h4>
                                                <p class="text-muted"> {{request.user.email}} </p>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="dropdown-divider"></div>
                                        <a class="dropdown-item" href="{% url 'monProfil' %}">Mon Profile</a>
                                        <div class="dropdown-divider"></div>
                                        <a class="dropdown-item" href=" {% url 'deconnexion' %} ">Deconnexion</a>
                                    </li>
                                </div>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>
            <!-- End Navbar -->
        </div>

        <!-- Sidebar -->
        <div class="sidebar sidebar-style-2">
            <div class="sidebar-wrapper scrollbar scrollbar-inner">
                <div class="sidebar-content">
                    <div class="user">
                        <div class="avatar-sm float-left mr-2">
                            {% if request.user.profile.profile %}
                                <img src="{{ request.user.profile.profile.url }}" alt="..." class="avatar-img rounded-circle">
                            {% else %}
                                <img src="{% static 'assets/img/profile2.jpg' %}" alt="profil" class="avatar-img rounded-circle">
                            {% endif %}


                        </div>
                        <div class="info">
                            <a data-toggle="collapse" href="#collapseExample" aria-expanded="true">
                                <span>
                                    {{request.user.username}}
                                    <span class="user-level" style="color: var(--primary-green);">Administrateur</span>
                                    <span class="caret"></span>
                                </span>
                            </a>
                            <div class="clearfix"></div>

                            <div class="collapse in" id="collapseExample">
                                <ul class="nav">
                                    <li>
                                        <a href="{% url 'monProfil' %}">
                                            <span class="link-collapse">Mon Profile</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'modifiermonProfil' %}">
                                            <span class="link-collapse">Editer mon Profile</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#settings">
                                            <span class="link-collapse">Parametre</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <ul class="nav nav-primary">
                        <li class="nav-item active">
                            <a  href="{% url 'dash' %}" class="nav-link">
                                <i class="fas fa-home" style="color: var(--primary-blue);"></i>
                                <p>Tableau de bord</p>
                                <span class="caret"></span>
                            </a>

                        </li>
                        <li class="nav-section">
                            <span class="sidebar-mini-icon">
                                <i class="fa fa-ellipsis-h" style="color: var(--accent-red);"></i>
                            </span>
                            <h4 class="text-section">Gestions des</h4>
                        </li>
                        <li class="nav-item">
                            <a data-toggle="collapse" href="#sidebarLayouts">
                                <i class="fas fa-th-list" style="color: var(--primary-green);"></i>
                                <p>Type Affaire</p>
                                <span class="caret"></span>
                            </a>
                            <div class="collapse" id="sidebarLayouts">
                                <ul class="nav nav-collapse">
                                    <li>
                                        <a href="{% url 'creertypeaffaire' %}">
                                            <span class="sub-item">ajouter un type d'affaire</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'typeaffaireliste' %}">
                                            <span class="sub-item">Liste des types d'affaires</span>
                                        </a>
                                    </li>

                                </ul>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a data-toggle="collapse" href="#forms">
                                <i class="fas fa-pen-square" style="color: var(--accent-yellow);"></i>
                                <p>Statut dossier</p>
                                <span class="caret"></span>
                            </a>
                            <div class="collapse" id="forms">
                                <ul class="nav nav-collapse">
                                    <li>
                                        <a href="{% url 'creerstatutdossier' %}">
                                            <span class="sub-item">Ajouter un statut dossier</span>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="{% url 'statutdossierliste' %}">
                                            <span class="sub-item">Liste des statut dossier</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a data-toggle="collapse" href="#submenu">
                                <i class="fas fa-bars" style="color: var(--primary-blue);"></i>
                                <p>Utilisateurs et Roles</p>
                                <span class="caret"></span>
                            </a>
                            <div class="collapse" id="submenu">
                                <ul class="nav nav-collapse">
                                    <li>
                                        <a data-toggle="collapse" href="#subnav1">
                                            <span class="sub-item">Simple Utilisateur</span>
                                            <span class="caret"></span>
                                        </a>
                                        <div class="collapse" id="subnav1">
                                            <ul class="nav nav-collapse subnav">
                                                <li>
                                                    <a href="{% url 'creationUtilisateur' %}">
                                                        <span class="sub-item">creer un utilisateur</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="{% url 'listeUtilisateur' %}">
                                                        <span class="sub-item">Liste des Utilisateurs</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li>
                                        <a data-toggle="collapse" href="#subnav2">
                                            <span class="sub-item">Expert Metier / Personnel Administratif</span>
                                            <span class="caret"></span>
                                        </a>
                                        <div class="collapse" id="subnav2">
                                            <ul class="nav nav-collapse subnav">
                                                <li>
                                                    <a href="{% url 'avocat' %}">
                                                        <span class="sub-item">Ajouter un expert/personnel administratif</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="{% url 'listeavocat' %}">
                                                        <span class="sub-item">Liste des expert/personnel administratif</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>

                                    <li>
                                        <a data-toggle="collapse" href="#subnav3">
                                            <span class="sub-item">Client</span>
                                            <span class="caret"></span>
                                        </a>
                                        <div class="collapse" id="subnav3">
                                            <ul class="nav nav-collapse subnav">
                                                <li>
                                                    <a href="{% url 'ajouterclient' %}">
                                                        <span class="sub-item">Ajouter un client</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="{% url 'listeclient' %}">
                                                        <span class="sub-item">Liste des clients</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>

                                </ul>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a data-toggle="collapse" href="#maps">
                                <i class="fas fa-map-marker-alt" style="color: var(--accent-red);"></i>
                                <p>Dossier</p>
                                <span class="caret"></span>
                            </a>
                            <div class="collapse" id="maps">
                                <ul class="nav nav-collapse">
                                    <li>
                                        <a href="{% url 'dossiercreer' %}">
                                            <span class="sub-item">Ajouter un dossier</span>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="{% url 'dossierlist' %}">
                                            <span class="sub-item">Liste des dossier</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a data-toggle="collapse" href="#tables">
                                <i class="fas fa-table" style="color: var(--primary-green);"></i>
                                <p>Document</p>
                                <span class="caret"></span>
                            </a>
                            <div class="collapse" id="tables">
                                <ul class="nav nav-collapse">
                                    <li>
                                        <a href="{% url 'documentcreer' %}">
                                            <span class="sub-item">Ajouter un document</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'documentlist' %} ">
                                            <span class="sub-item">Liste des documents</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a  href="{% url 'dossierclientliste' %}">
                                <i class="far fa-chart-bar" style="color: var(--accent-yellow);"></i>
                                <p>Dossier Client</p>
                                <span class="caret"></span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'dossieravocatliste' %}">
                                <i class="fas fa-desktop" style="color: var(--primary-blue);"></i>
                                <p>Dossier Expert/ <br>Personnel administratif</p>

                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="{% url 'rendezvousliste' %}">
                                <i class="fas fa-calendar-alt" style="color: var(--primary-green);"></i>
                                <p>RendezVous</p>

                            </a>
                        </li>

                        <li class="nav-item">
                            <a href=" {% url 'evenementliste' %}">
                                <i class="fas fa-star" style="color: var(--accent-yellow);"></i>
                                <p>Evenement</p>

                            </a>
                        </li>

                        <li class="nav-item">
                            <a href=" {% url 'paiementliste' %}">
                                <i class="fas fa-money-bill-wave" style="color: var(--primary-green);"></i>
                                <p>Paiement</p>

                            </a>
                        </li>

                        <li class="nav-item">
                            <a href=" {% url 'messageliste' %}">
                                <i class="fas fa-envelope" style="color: var(--accent-red);"></i>
                                <p>Message</p>

                            </a>
                        </li>

                        <li class="nav-item">
                            <a data-toggle="collapse" href="#sidebarLayoutss">
                                <i class="fas fa-th-list" style="color: var(--primary-green);"></i>
                                <p>Realisation</p>
                                <span class="caret"></span>
                            </a>
                            <div class="collapse" id="sidebarLayoutss">
                                <ul class="nav nav-collapse">
                                    <li>
                                        <a href="{% url 'listeentreprise' %}">
                                            <span class="sub-item">Creation d'entreprise</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'listeetude' %}">
                                            <span class="sub-item">Etude</span>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="{% url 'listeformation' %}">
                                            <span class="sub-item">Formation</span>
                                        </a>
                                    </li>

                                </ul>
                            </div>
                        </li>


                        <li class="mx-4 mt-2">
                            <a href="{% url 'deconnexion' %}" class="btn btn-danger btn-block"><span class="btn-label mr-2">  </span>Deconnexion</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- End Sidebar -->

        <div class="main-panel">
            <div class="content">
                {%  block content %}

                {% endblock %}


            </div>
            <footer class="footer">
                <div class="container-fluid">
                    <nav class="pull-left">
                        <ul class="nav">
                            <li class="nav-item">
                                <a class="nav-link" href="#" style="color: var(--primary-blue);">
                                    Confidentialité
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" style="color: var(--primary-green);">
                                    Conditions
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" style="color: var(--accent-red);">
                                    Contact
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <div class="copyright ml-auto">
                        <span style="color: var(--dark);">tout droit reservé 2025 MIPgroup</span>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!--   Core JS Files   -->
    <script src="{% static 'assets/js/core/jquery.3.2.1.min.js' %}"></script>
    <script src="{% static 'assets/js/core/popper.min.js' %}"></script>
    <script src="{% static 'assets/js/core/bootstrap.min.js' %}"></script>

    <!-- jQuery UI -->
    <script src="{% static 'assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js' %}"></script>
    <script src="{% static 'assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js' %}"></script>

    <!-- jQuery Scrollbar -->
    <script src="{% static 'assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js' %}"></script>

    <!-- Chart JS -->
    <script src="{% static 'assets/js/plugin/chart.js/chart.min.js' %}"></script>

    <!-- jQuery Sparkline -->
    <script src="{% static 'assets/js/plugin/jquery.sparkline/jquery.sparkline.min.js' %}"></script>

    <!-- Chart Circle -->
    <script src="{% static 'assets/js/plugin/chart-circle/circles.min.js' %}"></script>

    <!-- Datatables -->
    <script src="{% static 'assets/js/plugin/datatables/datatables.min.js' %}"></script>

    <!-- Bootstrap Notify -->
    <script src="{% static 'assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js' %}"></script>

    <!-- jQuery Vector Maps -->
    <script src="{% static 'assets/js/plugin/jqvmap/jquery.vmap.min.js' %}"></script>
    <script src="{% static 'assets/js/plugin/jqvmap/maps/jquery.vmap.world.js' %}"></script>

    <!-- Sweet Alert -->
    <script src="{% static 'assets/js/plugin/sweetalert/sweetalert.min.js' %}"></script>

    <!-- Atlantis JS -->
    <script src="{% static 'assets/js/atlantis.min.js' %}"></script>

    <!-- Atlantis DEMO methods, don't include it in your project! -->
    <script src="{% static 'assets/js/setting-demo.js' %}"></script>
    <script src="{% static 'assets/js/demo.js' %}"></script>






    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

<script>
// Fonction pour créer un graphique avec des options communes
function createChart(ctxId, labels, data, colors, title) {
    const ctx = document.getElementById(ctxId).getContext('2d');
    return new Chart(ctx, {
        type: 'pie',
        data: {
            labels: labels,
            datasets: [{
                data: data,
                backgroundColor: colors,
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'right',
                },
                title: {
                    display: true,
                    text: title,
                    font: {
                        size: 16
                    }
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.label || '';
                            if (label) {
                                label += ': ';
                            }
                            label += context.raw + ' (' + Math.round(context.parsed * 100 / context.dataset.data.reduce((a, b) => a + b, 0)) + '%)';
                            return label;
                        }
                    }
                },
                datalabels: {
                    formatter: (value, ctx) => {
                        let sum = ctx.dataset.data.reduce((a, b) => a + b, 0);
                        let percentage = (value * 100 / sum).toFixed(1) + "%";
                        return percentage;
                    },
                    color: '#fff',
                    font: {
                        weight: 'bold',
                        size: 12
                    }
                }
            }
        },
        plugins: [ChartDataLabels]
    });
}

// Couleurs personnalisées
const chartColors = [
    '#4e73df', '#1cc88a', '#36b9cc', '#f6c23e',
    '#e74a3b', '#6610f2', '#fd7e14', '#20c997'
];

// Initialisation des graphiques
document.addEventListener('DOMContentLoaded', function() {
    // Avocats
    const avocatsChart = createChart(
        'avocatsChart',
        {{ avocat_labels|safe }},
        {{ avocat_data|safe }},
        chartColors,
        'Répartition par spécialité'
    );

    // Documents
    const documentsChart = createChart(
        'documentsChart',
        {{ document_labels|safe }},
        {{ document_data|safe }},
        chartColors.slice().reverse(),
        'Types de documents'
    );

    // Paiements
    const paiementsChart = createChart(
        'paiementsChart',
        {{ paiement_labels|safe }},
        {{ paiement_data|safe }},
        [chartColors[1], chartColors[3], chartColors[5]],
        'Modes de paiement'
    );

    // Clients
    const clientsChart = createChart(
        'clientsChart',
        {{ client_labels|safe }},
        {{ client_data|safe }},
        [chartColors[0], chartColors[2], chartColors[4]],
        'Types de clients'
    );

    // Export des graphiques
    document.getElementById('exportAvocatsChart').addEventListener('click', function() {
        const link = document.createElement('a');
        link.download = 'specialites-avocats.png';
        link.href = document.getElementById('avocatsChart').toDataURL('image/png');
        link.click();
    });
});
</script>

<style>
    .card {
        border-radius: 0.35rem;
        transition: all 0.3s ease;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
    }

    .chart-pie {
        position: relative;
        height: 300px;
    }

    .table-responsive {
        max-height: 400px;
        overflow-y: auto;
    }

    #recentActivity tbody tr:hover {
        background-color: #f8f9fa;
        cursor: pointer;
    }

    .dropdown-menu {
        font-size: 0.85rem;
    }

    .badge {
        font-size: 0.9rem;
        font-weight: 600;
    }
</style>

<!-- jQuery (nécessaire pour Select2) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Select2 JS -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script>
  $(document).ready(function() {
    $('.select2').select2({
      placeholder: function(){
        return $(this).data('placeholder');
      },
      allowClear: true,
      width: '100%'
    });
  });
</script>

</body>
</html>